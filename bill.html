<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cart / Bill</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>Shopping Cart</h2>
  <table border="1" cellspacing="0" cellpadding="5">
    <thead>
      <tr>
        <th>SN</th>
        <th>Name</th>
        <th>Image</th>
        <th>QTY</th>
        <th>Price</th>
        <th>Color</th>
        <th>Total</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="bill-body"></tbody>
  </table>
  <br>
  <a href="shop.html">Back to Shop</a>

  <script>
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    function Bill() {
      const output = document.getElementById("bill-body");
      let html = "";
      let totalLine = 0;
      let sn = 1;

      if (cart.length === 0) {
        html = `<tr><td colspan="8" style="text-align:center">Cart is empty</td></tr>`;
      } else {
        cart.forEach(item => {
          let lineTotal = item.price * item.qty;
          totalLine += lineTotal;

          html += `<tr>
            <td>${sn++}</td>
            <td>${item.name}</td>
            <td><img src="image/${item.image}" height="30"></td>
            <td>${item.qty}</td>
            <td>${item.price}</td>
            <td>${item.color}</td>
            <td>${lineTotal}</td>
            <td>
              <input type="button" value="+" onclick="inc(${item.id})">
              <input type="button" value="-" onclick="dec(${item.id})">
              <input type="button" value="x" onclick="del(${item.id})">
            </td>
          </tr>`;
        });

        html += `<tr>
          <th colspan="6" style="text-align:right">Total</th>
          <th>${totalLine}</th>
          <th><input type="button" value="Clear Cart" onclick="clr()"></th>
        </tr>`;
      }

      output.innerHTML = html;
      localStorage.setItem("cart", JSON.stringify(cart));
    }

    function inc(id) {
      let item = cart.find(i => i.id === id);
      if (item) { item.qty++; Bill(); }
    }

    function dec(id) {
      let item = cart.find(i => i.id === id);
      if (item) { 
        item.qty--; 
        if(item.qty < 1) item.qty = 1; 
        Bill(); 
      }
    }

    function del(id) {
      cart = cart.filter(i => i.id !== id);
      Bill();
    }

    function clr() {
      cart = [];
      Bill();
    }

    // Initial render
    Bill();
  </script>
</body>
</html>
